<script>
    const socket = io.connect();
    let game = {};

    // Identification

    socket.on('id', msg => {
        if (hasID()) {
            socket.emit('id', getID())
        } else {
            socket.emit('no id')
        }
    })

    socket.on('new id', msg => setID(msg));

    socket.on('id ok', msg => {
        console.log('session ID is ok');
        if (msg !== undefined && msg !== null) {
            game = msg;
        }
    });

    const getID = () => {
        return localStorage.getItem('id');
    }

    const hasID = () => {
        return localStorage.getItem('id') !== null;
    }

    const setID = id => {
        localStorage.setItem('id', id);
    }

    // Tests

    const testConnection = () => {
        socket.emit('test');
    }

    socket.on('test', () => alert('test succeded'));

    // Settings

    const startLobby = () => {
        localStorage.setItem('lobby', true);
        socket.emit('new lobby', localStorage.getItem('id'));
    }

    socket.on('lobby', msg => game = msg);
    
    // Game

</script>